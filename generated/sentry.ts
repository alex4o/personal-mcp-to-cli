#!/usr/bin/env bun
// @generated by mcps@0.0.0 on 2026-02-23T09:42:14.310Z. DO NOT EDIT.
import { Command } from 'commander';
import { createRuntime, createServerProxy } from 'mcporter';
import { createCallResult } from 'mcporter';

const embeddedServer = {
  "name": "sentry",
  "command": {
    "kind": "http",
    "url": "https://mcp.sentry.dev/mcp"
  },
  "source": {
    "kind": "local",
    "path": "<adhoc>"
  },
  "auth": "oauth",
  "oauthRedirectUrl": "http://megumin.serval-tone.ts.net:9802/callback",
  "description": "Sentry MCP"
} as const;
const embeddedSchemas = {
  "whoami": {
    "type": "object",
    "properties": {},
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "find_organizations": {
    "type": "object",
    "properties": {
      "query": {
        "anyOf": [
          {
            "type": "string",
            "description": "Search query to filter results by name or slug. Use this to narrow down results when there are many items."
          },
          {
            "type": "null"
          }
        ],
        "description": "Search query to filter results by name or slug. Use this to narrow down results when there are many items.",
        "default": null
      }
    },
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "find_teams": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "query": {
        "anyOf": [
          {
            "type": "string",
            "description": "Search query to filter results by name or slug. Use this to narrow down results when there are many items."
          },
          {
            "type": "null"
          }
        ],
        "description": "Search query to filter results by name or slug. Use this to narrow down results when there are many items.",
        "default": null
      }
    },
    "required": [
      "organizationSlug"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "find_projects": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "query": {
        "anyOf": [
          {
            "type": "string",
            "description": "Search query to filter results by name or slug. Use this to narrow down results when there are many items."
          },
          {
            "type": "null"
          }
        ],
        "description": "Search query to filter results by name or slug. Use this to narrow down results when there are many items.",
        "default": null
      }
    },
    "required": [
      "organizationSlug"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "find_releases": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "projectSlug": {
        "anyOf": [
          {
            "type": "string",
            "description": "The project's slug. This will default to all projects you have access to. It is encouraged to specify this when possible."
          },
          {
            "type": "null"
          }
        ],
        "description": "The project's slug. This will default to all projects you have access to. It is encouraged to specify this when possible.",
        "default": null
      },
      "query": {
        "anyOf": [
          {
            "type": "string",
            "description": "Search for versions which contain the provided string."
          },
          {
            "type": "null"
          }
        ],
        "description": "Search for versions which contain the provided string.",
        "default": null
      }
    },
    "required": [
      "organizationSlug"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "get_issue_details": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "issueId": {
        "type": "string",
        "description": "The Issue ID. e.g. `PROJECT-1Z43`"
      },
      "eventId": {
        "type": "string",
        "description": "The ID of the event."
      },
      "issueUrl": {
        "type": "string",
        "format": "uri",
        "description": "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43"
      }
    },
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "get_issue_tag_values": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "issueId": {
        "type": "string",
        "description": "The Issue ID. e.g. `PROJECT-1Z43`"
      },
      "issueUrl": {
        "type": "string",
        "format": "uri",
        "description": "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43"
      },
      "tagKey": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9][a-zA-Z0-9._-]*$",
        "description": "The tag key to get values for (e.g., 'url', 'browser', 'environment', 'release')."
      }
    },
    "required": [
      "tagKey"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "get_trace_details": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "traceId": {
        "type": "string",
        "pattern": "^[0-9a-fA-F]{32}$",
        "description": "The trace ID. e.g. `a4d1aae7216b47ff8117cf4e09ce9d0a`"
      }
    },
    "required": [
      "organizationSlug",
      "traceId"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "get_event_attachment": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "projectSlug": {
        "type": "string",
        "description": "The project's slug. You can find a list of existing projects in an organization using the `find_projects()` tool."
      },
      "eventId": {
        "type": "string",
        "description": "The ID of the event."
      },
      "attachmentId": {
        "anyOf": [
          {
            "type": "string",
            "description": "The ID of the attachment to download."
          },
          {
            "type": "null"
          }
        ],
        "description": "The ID of the attachment to download.",
        "default": null
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      }
    },
    "required": [
      "organizationSlug",
      "projectSlug",
      "eventId"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "update_issue": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "issueId": {
        "type": "string",
        "description": "The Issue ID. e.g. `PROJECT-1Z43`"
      },
      "issueUrl": {
        "type": "string",
        "format": "uri",
        "description": "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43"
      },
      "status": {
        "type": "string",
        "enum": [
          "resolved",
          "resolvedInNextRelease",
          "unresolved",
          "ignored"
        ],
        "description": "The new status for the issue. Valid values are 'resolved', 'resolvedInNextRelease', 'unresolved', and 'ignored'."
      },
      "assignedTo": {
        "type": "string",
        "description": "The assignee in format 'user:ID' or 'team:ID_OR_SLUG' where ID is numeric. Example: 'user:123456', 'team:789', or 'team:my-team-slug'. Use the whoami tool to find your user ID."
      }
    },
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "search_events": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "naturalLanguageQuery": {
        "type": "string",
        "minLength": 1,
        "description": "Natural language description of what you want to search for"
      },
      "projectSlug": {
        "anyOf": [
          {
            "type": "string",
            "description": "The project's slug. You can find a list of existing projects in an organization using the `find_projects()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The project's slug. You can find a list of existing projects in an organization using the `find_projects()` tool.",
        "default": null
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "limit": {
        "type": "number",
        "minimum": 1,
        "maximum": 100,
        "default": 10,
        "description": "Maximum number of results to return"
      },
      "includeExplanation": {
        "type": "boolean",
        "default": false,
        "description": "Include explanation of how the query was translated"
      }
    },
    "required": [
      "organizationSlug",
      "naturalLanguageQuery"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "analyze_issue_with_seer": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "issueId": {
        "type": "string",
        "description": "The Issue ID. e.g. `PROJECT-1Z43`"
      },
      "issueUrl": {
        "type": "string",
        "format": "uri",
        "description": "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43"
      },
      "instruction": {
        "type": "string",
        "description": "Optional custom instruction for the AI analysis"
      }
    },
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "search_docs": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "minLength": 2,
        "maxLength": 200,
        "description": "The search query in natural language. Be specific about what you're looking for."
      },
      "maxResults": {
        "type": "integer",
        "minimum": 1,
        "maximum": 10,
        "default": 3,
        "description": "Maximum number of results to return (1-10)"
      },
      "guide": {
        "anyOf": [
          {
            "type": "string",
            "enum": [
              "javascript",
              "python",
              "java",
              "dotnet",
              "go",
              "php",
              "ruby",
              "android",
              "apple",
              "unity",
              "unreal",
              "rust",
              "elixir",
              "kotlin",
              "native",
              "dart",
              "godot",
              "nintendo-switch",
              "playstation",
              "powershell",
              "react-native",
              "xbox",
              "javascript/nextjs",
              "javascript/react",
              "javascript/gatsby",
              "javascript/remix",
              "javascript/vue",
              "javascript/angular",
              "javascript/hono",
              "javascript/svelte",
              "javascript/express",
              "javascript/fastify",
              "javascript/astro",
              "javascript/bun",
              "javascript/capacitor",
              "javascript/cloudflare",
              "javascript/connect",
              "javascript/cordova",
              "javascript/deno",
              "javascript/electron",
              "javascript/ember",
              "javascript/nuxt",
              "javascript/solid",
              "javascript/solidstart",
              "javascript/sveltekit",
              "javascript/tanstack-react",
              "javascript/wasm",
              "javascript/node",
              "javascript/koa",
              "javascript/nestjs",
              "javascript/hapi",
              "python/django",
              "python/flask",
              "python/fastapi",
              "python/celery",
              "python/tornado",
              "python/pyramid",
              "python/aiohttp",
              "python/anthropic",
              "python/airflow",
              "python/aws-lambda",
              "python/boto3",
              "python/bottle",
              "python/chalice",
              "python/dramatiq",
              "python/falcon",
              "python/langchain",
              "python/litestar",
              "python/logging",
              "python/loguru",
              "python/openai",
              "python/quart",
              "python/ray",
              "python/redis",
              "python/rq",
              "python/sanic",
              "python/sqlalchemy",
              "python/starlette",
              "dart/flutter",
              "dotnet/aspnetcore",
              "dotnet/maui",
              "dotnet/wpf",
              "dotnet/winforms",
              "dotnet/aspnet",
              "dotnet/aws-lambda",
              "dotnet/azure-functions",
              "dotnet/blazor-webassembly",
              "dotnet/entityframework",
              "dotnet/google-cloud-functions",
              "dotnet/extensions-logging",
              "dotnet/log4net",
              "dotnet/nlog",
              "dotnet/serilog",
              "dotnet/uwp",
              "dotnet/xamarin",
              "java/spring",
              "java/spring-boot",
              "java/android",
              "java/jul",
              "java/log4j2",
              "java/logback",
              "java/servlet",
              "go/echo",
              "go/fasthttp",
              "go/fiber",
              "go/gin",
              "go/http",
              "go/iris",
              "go/logrus",
              "go/negroni",
              "go/slog",
              "go/zerolog",
              "php/laravel",
              "php/symfony",
              "ruby/delayed_job",
              "ruby/rack",
              "ruby/rails",
              "ruby/resque",
              "ruby/sidekiq",
              "android/kotlin",
              "apple/ios",
              "apple/macos",
              "apple/watchos",
              "apple/tvos",
              "apple/visionos",
              "kotlin/multiplatform"
            ],
            "description": "Optional guide filter to limit search results to specific documentation sections. Use either a platform (e.g., 'javascript', 'python') or platform/guide combination (e.g., 'javascript/nextjs', 'python/django')."
          },
          {
            "type": "null"
          }
        ],
        "description": "Optional guide filter to limit search results to specific documentation sections. Use either a platform (e.g., 'javascript', 'python') or platform/guide combination (e.g., 'javascript/nextjs', 'python/django').",
        "default": null
      }
    },
    "required": [
      "query"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "get_doc": {
    "type": "object",
    "properties": {
      "path": {
        "type": "string",
        "description": "The documentation path (e.g., '/platforms/javascript/guides/nextjs.md'). Get this from search_docs results."
      }
    },
    "required": [
      "path"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "search_issues": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "type": "string",
        "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
      },
      "naturalLanguageQuery": {
        "type": "string",
        "minLength": 1,
        "description": "Natural language description of issues to search for"
      },
      "projectSlugOrId": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ],
        "default": null,
        "description": "The project's slug or numeric ID (optional)"
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool.",
        "default": null
      },
      "limit": {
        "type": "number",
        "minimum": 1,
        "maximum": 100,
        "default": 10,
        "description": "Maximum number of issues to return"
      },
      "includeExplanation": {
        "type": "boolean",
        "default": false,
        "description": "Include explanation of how the query was translated"
      }
    },
    "required": [
      "organizationSlug",
      "naturalLanguageQuery"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  },
  "search_issue_events": {
    "type": "object",
    "properties": {
      "organizationSlug": {
        "anyOf": [
          {
            "type": "string",
            "description": "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "Organization slug. Required when using issueId. Not needed when using issueUrl.",
        "default": null
      },
      "issueId": {
        "type": "string",
        "description": "Issue ID (e.g., 'MCP-41', 'PROJECT-123'). Requires organizationSlug. Alternatively, use issueUrl."
      },
      "issueUrl": {
        "type": "string",
        "format": "uri",
        "description": "Full Sentry issue URL (e.g., 'https://sentry.io/organizations/my-org/issues/123/'). Includes both organization and issue ID."
      },
      "naturalLanguageQuery": {
        "type": "string",
        "minLength": 1,
        "description": "Natural language description of what events you want to find within this issue. Examples: 'from last hour', 'production with release v1.0', 'affecting user alice@example.com', 'with trace ID abc123'"
      },
      "projectSlug": {
        "anyOf": [
          {
            "type": "string",
            "description": "The project's slug. You can find a list of existing projects in an organization using the `find_projects()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "Project slug for better tag discovery. Optional - helps find project-specific tags.",
        "default": null
      },
      "regionUrl": {
        "anyOf": [
          {
            "type": "string",
            "description": "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool."
          },
          {
            "type": "null"
          }
        ],
        "description": "Sentry region URL. Optional - defaults to main region.",
        "default": null
      },
      "limit": {
        "type": "number",
        "minimum": 1,
        "maximum": 100,
        "default": 50,
        "description": "Maximum number of events to return (1-100, default: 50)"
      },
      "includeExplanation": {
        "type": "boolean",
        "default": false,
        "description": "Include explanation of how the natural language query was translated to Sentry syntax"
      }
    },
    "required": [
      "naturalLanguageQuery"
    ],
    "additionalProperties": false,
    "$schema": "http://json-schema.org/draft-07/schema#"
  }
} as const;
const embeddedName = "sentry";
const embeddedDescription = "Sentry MCP";
const generatorInfo = "Generated by mcps@0.0.0 — https://github.com/steipete/mcporter";
const generatorTools = [
  {
    "name": "whoami",
    "description": "Identify the authenticated user in Sentry.\n\nUse this tool when you need to:\n- Get the user's name and email address.",
    "usage": "whoami [--raw <json>]",
    "flags": "[--raw <json>]"
  },
  {
    "name": "find-organizations",
    "description": "Find organizations that the user has access to in Sentry.\n\nUse this tool when you need to:\n- View organizations in Sentry\n- Find an organization's slug to aid other tool requests\n- Search for specific organizations by name or slug\n\nReturns up to 25 results. If you hit this limit, use the query parameter to narrow down results.",
    "usage": "find-organizations [--query <query>] [--raw <json>]",
    "flags": "[--query <query>] [--raw <json>]"
  },
  {
    "name": "find-teams",
    "description": "Find teams in an organization in Sentry.\n\nUse this tool when you need to:\n- View teams in a Sentry organization\n- Find a team's slug and numeric ID to aid other tool requests\n- Search for specific teams by name or slug\n\nReturns up to 25 results. If you hit this limit, use the query parameter to narrow down results.",
    "usage": "find-teams --organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]",
    "flags": "--organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]"
  },
  {
    "name": "find-projects",
    "description": "Find projects in Sentry.\n\nUse this tool when you need to:\n- View projects in a Sentry organization\n- Find a project's slug to aid other tool requests\n- Search for specific projects by name or slug\n\nReturns up to 25 results. If you hit this limit, use the query parameter to narrow down results.",
    "usage": "find-projects --organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]",
    "flags": "--organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]"
  },
  {
    "name": "find-releases",
    "description": "Find releases in Sentry.\n\nUse this tool when you need to:\n- Find recent releases in a Sentry organization\n- Find the most recent version released of a specific project\n- Determine when a release was deployed to an environment\n\n<examples>\n### Find the most recent releases in the 'my-organization' organization\n\n```\nfind_releases(organizationSlug='my-organization')\n```\n\n### Find releases matching '2ce6a27' in the 'my-organization' organization\n\n```\nfind_releases(organizationSlug='my-organization', query='2ce6a27')\n```\n</examples>\n\n<hints>\n- If the user passes a parameter in the form of name/otherName, its likely in the format of <organizationSlug>/<projectSlug>.\n</hints>",
    "usage": "find-releases --organization-slug <organization-slug> [--region-url <region-url>] [--project-slug <project-slug>] [--query <query>] [--raw <json>]",
    "flags": "--organization-slug <organization-slug> [--region-url <region-url>] [--project-slug <project-slug>] [--query <query>] [--raw <json>]"
  },
  {
    "name": "get-issue-details",
    "description": "Get detailed information about a specific Sentry issue by ID.\n\nUSE THIS TOOL WHEN USERS:\n- Provide a specific issue ID (e.g., 'CLOUDFLARE-MCP-41', 'PROJECT-123')\n- Ask to 'explain [ISSUE-ID]', 'tell me about [ISSUE-ID]'\n- Want details/stacktrace/analysis for a known issue\n- Provide a Sentry issue URL\n\nDO NOT USE for:\n- General searching or listing issues (use search_issues)\n- Root cause analysis (use analyze_issue_with_seer)\n\nTRIGGER PATTERNS:\n- 'Explain ISSUE-123' → use get_issue_details\n- 'Tell me about PROJECT-456' → use get_issue_details\n- 'What happened in [issue URL]' → use get_issue_details\n\n<examples>\n### With Sentry URL (recommended - simplest approach)\n```\nget_issue_details(issueUrl='https://sentry.sentry.io/issues/6916805731/?project=4509062593708032&query=is%3Aunresolved')\n```\n\n### With issue ID and organization\n```\nget_issue_details(organizationSlug='my-organization', issueId='CLOUDFLARE-MCP-41')\n```\n\n### With event ID and organization\n```\nget_issue_details(organizationSlug='my-organization', eventId='c49541c747cb4d8aa3efb70ca5aba243')\n```\n</examples>\n\n<hints>\n- **IMPORTANT**: If user provides a Sentry URL, pass the ENTIRE URL to issueUrl parameter unchanged\n- When using issueUrl, all other parameters are automatically extracted - don't provide them separately\n- If using issueId (not URL), then organizationSlug is required\n</hints>",
    "usage": "get-issue-details [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--event-id <event-id>] [--issue-url <issue-url:uri>] [--raw <json>]",
    "flags": "[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--event-id <event-id>] [--issue-url <issue-url:uri>] [--raw <json>]"
  },
  {
    "name": "get-issue-tag-values",
    "description": "Get tag value distribution for a specific Sentry issue.\n\nUse this tool when you need to:\n- Understand how an issue is distributed across different tag values\n- Get aggregate counts of unique tag values (e.g., 'how many unique URLs are affected')\n- Analyze which browsers, environments, or URLs are most impacted by an issue\n- View the tag distributions page data programmatically\n\nCommon tag keys:\n- `url`: Request URLs affected by the issue\n- `browser`: Browser types and versions\n- `browser.name`: Browser names only\n- `os`: Operating systems\n- `environment`: Deployment environments (production, staging, etc.)\n- `release`: Software releases\n- `device`: Device types\n- `user`: Affected users\n\n<examples>\n### Get URL distribution for an issue\n```\nget_issue_tag_values(organizationSlug='my-organization', issueId='PROJECT-123', tagKey='url')\n```\n\n### Get browser distribution using issue URL\n```\nget_issue_tag_values(issueUrl='https://sentry.io/issues/PROJECT-123/', tagKey='browser')\n```\n\n### Get environment distribution\n```\nget_issue_tag_values(organizationSlug='my-organization', issueId='PROJECT-123', tagKey='environment')\n```\n</examples>\n\n<hints>\n- If user provides a Sentry URL, pass the ENTIRE URL to issueUrl parameter unchanged\n- Common tag keys: url, browser, browser.name, os, environment, release, device, user\n- Tag keys are case-sensitive\n</hints>",
    "usage": "get-issue-tag-values [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --tag-key <tag-key> [--raw <json>]",
    "flags": "[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --tag-key <tag-key> [--raw <json>]"
  },
  {
    "name": "get-trace-details",
    "description": "Get detailed information about a specific Sentry trace by ID.\n\nUSE THIS TOOL WHEN USERS:\n- Provide a specific trace ID (e.g., 'a4d1aae7216b47ff8117cf4e09ce9d0a')\n- Ask to 'show me trace [TRACE-ID]', 'explain trace [TRACE-ID]'\n- Want high-level overview and link to view trace details in Sentry\n- Need trace statistics and span breakdown\n\nDO NOT USE for:\n- General searching for traces (use search_events with trace queries)\n- Individual span details (this shows trace overview)\n\nTRIGGER PATTERNS:\n- 'Show me trace abc123' → use get_trace_details\n- 'Explain trace a4d1aae7216b47ff8117cf4e09ce9d0a' → use get_trace_details\n- 'What is trace [trace-id]' → use get_trace_details\n\n<examples>\n### Get trace overview\n```\nget_trace_details(organizationSlug='my-organization', traceId='a4d1aae7216b47ff8117cf4e09ce9d0a')\n```\n</examples>\n\n<hints>\n- Trace IDs are 32-character hexadecimal strings\n</hints>",
    "usage": "get-trace-details --organization-slug <organization-slug> [--region-url <region-url>] --trace-id <trace-id> [--raw <json>]",
    "flags": "--organization-slug <organization-slug> [--region-url <region-url>] --trace-id <trace-id> [--raw <json>]"
  },
  {
    "name": "get-event-attachment",
    "description": "Download attachments from a Sentry event.\n\nUse this tool when you need to:\n- Download files attached to a specific event\n- Access screenshots, log files, or other attachments uploaded with an error report\n- Retrieve attachment metadata and download URLs\n\n<examples>\n### Download a specific attachment by ID\n\n```\nget_event_attachment(organizationSlug='my-organization', projectSlug='my-project', eventId='c49541c747cb4d8aa3efb70ca5aba243', attachmentId='12345')\n```\n\n### List all attachments for an event\n\n```\nget_event_attachment(organizationSlug='my-organization', projectSlug='my-project', eventId='c49541c747cb4d8aa3efb70ca5aba243')\n```\n\n</examples>\n\n<hints>\n- If `attachmentId` is provided, the specific attachment will be downloaded as an embedded resource\n- If `attachmentId` is omitted, all attachments for the event will be listed with download information\n- The `projectSlug` is required to identify which project the event belongs to\n</hints>",
    "usage": "get-event-attachment --organization-slug <organization-slug> --project-slug <project-slug> --event-id <event-id> [--attachment-id <attachment-id>] [--region-url <region-url>] [--raw <json>]",
    "flags": "--organization-slug <organization-slug> --project-slug <project-slug> --event-id <event-id> [--attachment-id <attachment-id>] [--region-url <region-url>] [--raw <json>]"
  },
  {
    "name": "update-issue",
    "description": "Update an issue's status or assignment in Sentry. This allows you to resolve, ignore, or reassign issues.\n\nUse this tool when you need to:\n- Resolve an issue that has been fixed\n- Assign an issue to a team member or team for investigation\n- Mark an issue as ignored to reduce noise\n- Reopen a resolved issue by setting status to 'unresolved'\n\n<examples>\n### Resolve an issue\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', status='resolved')\n```\n\n### Assign an issue to a user (use whoami to get your user ID)\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', assignedTo='user:123456')\n```\n\n### Assign an issue to a team (by ID or slug)\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', assignedTo='team:789')\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', assignedTo='team:my-team-slug')\n```\n\n### Mark an issue as ignored\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', status='ignored')\n```\n\n</examples>\n\n<hints>\n- If the user provides the `issueUrl`, you can ignore the other required parameters and extract them from the URL.\n- At least one of `status` or `assignedTo` must be provided to update the issue.\n- assignedTo format: Use 'user:ID' for users (e.g., 'user:123456') or 'team:ID_OR_SLUG' for teams (e.g., 'team:789' or 'team:my-team-slug')\n- To find your user ID, first use the whoami tool which returns your numeric user ID\n- Valid status values are: 'resolved', 'resolvedInNextRelease', 'unresolved', 'ignored'.\n</hints>",
    "usage": "update-issue [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--status <status:resolved|resolvedInNextRelease|unresolved|ignored>] [--raw <json>]",
    "flags": "[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--status <status:resolved|resolvedInNextRelease|unresolved|ignored>] [--raw <json>]"
  },
  {
    "name": "search-events",
    "description": "Search for events AND perform counts/aggregations - the ONLY tool for statistics and counts.\n\nSupports TWO query types:\n1. AGGREGATIONS (counts, sums, averages): 'how many errors', 'count of issues', 'total tokens'\n2. Individual events with timestamps: 'show me error logs from last hour'\n\nUSE THIS FOR ALL COUNTS/STATISTICS:\n- 'how many errors today' → returns count\n- 'count of database failures' → returns count\n- 'total number of issues' → returns count\n- 'average response time' → returns avg()\n- 'sum of tokens used' → returns sum()\n\nALSO USE FOR INDIVIDUAL EVENTS:\n- 'error logs from last hour' → returns event list\n- 'database errors with timestamps' → returns event list\n- 'trace spans for slow API calls' → returns span list\n\nDataset Selection (AI automatically chooses):\n- errors: Exception/crash events\n- logs: Log entries\n- spans: Performance data, AI/LLM calls, token usage\n\nDO NOT USE for grouped issue lists → use search_issues\n\n<examples>\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='how many errors today')\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='count of database failures this week')\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='total tokens used by model')\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='error logs from the last hour')\n</examples>\n\n<hints>\n- If the user passes a parameter in the form of name/otherName, it's likely in the format of <organizationSlug>/<projectSlug>.\n- Parse org/project notation directly without calling find_organizations or find_projects.\n</hints>",
    "usage": "search-events --organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]",
    "flags": "--organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]"
  },
  {
    "name": "analyze-issue-with-seer",
    "description": "Use Seer to analyze production errors and get detailed root cause analysis with specific code fixes.\n\nUse this tool when you need:\n- Detailed AI-powered root cause analysis\n- Specific code fixes and implementation guidance\n- Step-by-step troubleshooting for complex issues\n- Understanding why an error is happening in production\n\nWhat this tool provides:\n- Root cause analysis with code-level explanations\n- Specific file locations and line numbers where errors occur\n- Concrete code fixes you can apply\n- Step-by-step implementation guidance\n\nThis tool automatically:\n1. Checks if analysis already exists (instant results)\n2. Starts new AI analysis if needed (~2-5 minutes)\n3. Returns complete fix recommendations\n\n<examples>\n### User: \"What's causing this error? https://my-org.sentry.io/issues/PROJECT-1Z43\"\n\n```\nanalyze_issue_with_seer(issueUrl='https://my-org.sentry.io/issues/PROJECT-1Z43')\n```\n\n### User: \"Can you help me understand why this is failing in production?\"\n\n```\nanalyze_issue_with_seer(organizationSlug='my-organization', issueId='ERROR-456')\n```\n</examples>\n\n<hints>\n- Use this tool when you need deeper analysis beyond basic issue details\n- If the user provides an issueUrl, extract it and use that parameter alone\n- The analysis includes actual code snippets and fixes, not just error descriptions\n- Results are cached - subsequent calls return instantly\n</hints>",
    "usage": "analyze-issue-with-seer [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--instruction <instruction>] [--raw <json>]",
    "flags": "[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--instruction <instruction>] [--raw <json>]"
  },
  {
    "name": "search-docs",
    "description": "Search Sentry documentation for SDK setup, instrumentation, and configuration guidance.\n\nUse this tool when you need to:\n- Set up Sentry SDK or framework integrations (Django, Flask, Express, Next.js, etc.)\n- Configure features like performance monitoring, error sampling, or release tracking\n- Implement custom instrumentation (spans, transactions, breadcrumbs)\n- Configure data scrubbing, filtering, or sampling rules\n\nReturns snippets only. Use `get_doc(path='...')` to fetch full documentation content.\n\n<examples>\n```\nsearch_docs(query='Django setup configuration SENTRY_DSN', guide='python/django')\nsearch_docs(query='source maps webpack upload', guide='javascript/nextjs')\n```\n</examples>\n\n<hints>\n- Use guide parameter to filter to specific technologies (e.g., 'javascript/nextjs')\n- Include specific feature names like 'beforeSend', 'tracesSampleRate', 'SENTRY_DSN'\n</hints>",
    "usage": "search-docs --query <query> [--max-results <max-results:number>] [--guide <guide>] [--raw <json>]",
    "flags": "--query <query> [--max-results <max-results:number>] [--guide <guide>] [--raw <json>]"
  },
  {
    "name": "get-doc",
    "description": "Fetch the full markdown content of a Sentry documentation page.\n\nUse this tool when you need to:\n- Read the complete documentation for a specific topic\n- Get detailed implementation examples or code snippets\n- Access the full context of a documentation page\n- Extract specific sections from documentation\n\n<examples>\n### Get the Next.js integration guide\n\n```\nget_doc(path='/platforms/javascript/guides/nextjs.md')\n```\n</examples>\n\n<hints>\n- Use the path from search_docs results for accurate fetching\n- Paths should end with .md extension\n</hints>",
    "usage": "get-doc --path <path> [--raw <json>]",
    "flags": "--path <path> [--raw <json>]"
  },
  {
    "name": "search-issues",
    "description": "Search for grouped issues/problems in Sentry - returns a LIST of issues, NOT counts or aggregations.\n\nUses AI to translate natural language queries into Sentry issue search syntax.\nReturns grouped issues with metadata like title, status, and user count.\n\nUSE THIS TOOL WHEN USERS WANT:\n- A LIST of issues: 'show me issues', 'what problems do we have'\n- Filtered issue lists: 'unresolved issues', 'critical bugs'\n- Issues by impact: 'errors affecting more than 100 users'\n- Issues by assignment: 'issues assigned to me'\n- User feedback: 'show me user feedback', 'feedback from last week'\n\nDO NOT USE FOR COUNTS/AGGREGATIONS:\n- 'how many errors' → use search_events\n- 'count of issues' → use search_events\n- 'total number of errors today' → use search_events\n- 'sum/average/statistics' → use search_events\n\nALSO DO NOT USE FOR:\n- Individual error events with timestamps → use search_events\n- Details about a specific issue ID → use get_issue_details\n\nREMEMBER: This tool returns a LIST of issues, not counts or statistics!\n\n<examples>\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='critical bugs from last week')\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='unhandled errors affecting 100+ users')\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='issues assigned to me')\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='user feedback from production')\n</examples>\n\n<hints>\n- If the user passes a parameter in the form of name/otherName, it's likely in the format of <organizationSlug>/<projectSlugOrId>.\n- Parse org/project notation directly without calling find_organizations or find_projects.\n- The projectSlugOrId parameter accepts both project slugs (e.g., 'my-project') and numeric IDs (e.g., '123456').\n</hints>",
    "usage": "search-issues --organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug-or-id <project-slug-or-id>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]",
    "flags": "--organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug-or-id <project-slug-or-id>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]"
  },
  {
    "name": "search-issue-events",
    "description": "Search and filter events within a specific issue using natural language queries.\n\nUse this to filter events by time, environment, release, user, trace ID, or other tags. The tool automatically constrains results to the specified issue.\n\nFor cross-issue searches use search_issues, for single event details use get_issue_details.\n\n<examples>\nsearch_issue_events(issueId='MCP-41', organizationSlug='my-org', naturalLanguageQuery='from last hour')\nsearch_issue_events(issueUrl='https://sentry.io/.../issues/123/', naturalLanguageQuery='production with release v1.0')\n</examples>",
    "usage": "search-issue-events [--organization-slug <organization-slug>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--raw <json>]",
    "flags": "[--organization-slug <organization-slug>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--raw <json>]"
  }
] as const;
const embeddedMetadata = {
  "schemaVersion": 1,
  "generatedAt": "2026-02-23T09:42:14.310Z",
  "generator": {
    "name": "mcps",
    "version": "0.0.0"
  },
  "server": {
    "name": "sentry",
    "source": {
      "kind": "local",
      "path": "<adhoc>"
    },
    "definition": {
      "name": "sentry",
      "description": "Sentry MCP",
      "command": {
        "kind": "http",
        "url": "https://mcp.sentry.dev/mcp"
      },
      "auth": "oauth",
      "oauthRedirectUrl": "http://megumin.serval-tone.ts.net:9802/callback"
    }
  },
  "artifact": {
    "path": "",
    "kind": "template"
  },
  "invocation": {
    "serverRef": "{\"name\":\"sentry\",\"command\":{\"kind\":\"http\",\"url\":\"https://mcp.sentry.dev/mcp\"},\"source\":{\"kind\":\"local\",\"path\":\"<adhoc>\"},\"auth\":\"oauth\",\"oauthRedirectUrl\":\"http://megumin.serval-tone.ts.net:9802/callback\"}",
    "configPath": "<adhoc>",
    "runtime": "bun",
    "bundler": "bun",
    "outputPath": "./generated/sentry.ts",
    "timeoutMs": 30000,
    "minify": false
  }
} as const;
const artifactKind = determineArtifactKind();
const program = new Command();
program.name(embeddedName);
program.description(embeddedDescription);
program.option('-t, --timeout <ms>', 'Call timeout in milliseconds', (value) => parseInt(value, 10), 30000);
program.option('-o, --output <format>', 'Output format: text|markdown|json|raw', 'text');
const commandSignatures: Record<string, string> = {
  "whoami": "function whoami();",
  "find-organizations": "function find_organizations(query?: unknown);",
  "find-teams": "function find_teams(organizationSlug: string, regionUrl?: unknown, query?: unknown);",
  "find-projects": "function find_projects(organizationSlug: string, regionUrl?: unknown, query?: unknown);",
  "find-releases": "function find_releases(organizationSlug: string, regionUrl?: unknown, projectSlug?: unknown, query?: unknown);",
  "get-issue-details": "function get_issue_details(organizationSlug?: string, regionUrl?: unknown, issueId?: string, eventId?: string, issueUrl?: string /* Uri */);",
  "get-issue-tag-values": "function get_issue_tag_values(organizationSlug?: string, regionUrl?: unknown, issueId?: string, issueUrl?: string /* Uri */, tagKey: string);",
  "get-trace-details": "function get_trace_details(organizationSlug: string, regionUrl?: unknown, traceId: string);",
  "get-event-attachment": "function get_event_attachment(organizationSlug: string, projectSlug: string, eventId: string, attachmentId?: unknown, regionUrl?: unknown);",
  "update-issue": "function update_issue(organizationSlug?: string, regionUrl?: unknown, issueId?: string, issueUrl?: string /* Uri */, status?: \"resolved\" | \"resolvedInNextRelease\" | \"unresolved\" | \"ignored\");",
  "search-events": "function search_events(organizationSlug: string, naturalLanguageQuery: string, projectSlug?: unknown, regionUrl?: unknown, limit?: number);",
  "analyze-issue-with-seer": "function analyze_issue_with_seer(organizationSlug?: string, regionUrl?: unknown, issueId?: string, issueUrl?: string /* Uri */, instruction?: string);",
  "search-docs": "function search_docs(query: string, maxResults?: number, guide?: unknown);",
  "get-doc": "function get_doc(path: string);",
  "search-issues": "function search_issues(organizationSlug: string, naturalLanguageQuery: string, projectSlugOrId?: unknown, regionUrl?: unknown, limit?: number);",
  "search-issue-events": "function search_issue_events(organizationSlug?: unknown, issueId?: string, issueUrl?: string /* Uri */, naturalLanguageQuery: string, projectSlug?: unknown);"
};
program.configureHelp({
	commandTerm(cmd) {
		const term = cmd.name();
		return commandSignatures[term] ?? cmd.name();
	},
});
program.showSuggestionAfterError(true);

program
	.command("whoami")
	.summary("whoami [--raw <json>]")
	.description("Identify the authenticated user in Sentry.\n\nUse this tool when you need to:\n- Get the user's name and email address.")
	.usage("[--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			
			const call = (proxy.whoami as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.whoami()");

program
	.command("find-organizations")
	.summary("find-organizations [--query <query>] [--raw <json>]")
	.description("Find organizations that the user has access to in Sentry.\n\nUse this tool when you need to:\n- View organizations in Sentry\n- Find an organization's slug to aid other tool requests\n- Search for specific organizations by name or slug\n\nReturns up to 25 results. If you hit this limit, use the query parameter to narrow down results.")
	.usage("[--query <query>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.option("--query <query>", "Search query to filter results by name or slug. Use this to narrow down results when there are many items. (default: null; example: null)")
	
	.alias("find_organizations")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.query !== undefined) args.query = cmdOpts.query;
			const call = (proxy.findOrganizations as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.find_organizations(query: \"null\")");

program
	.command("find-teams")
	.summary("find-teams --organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]")
	.description("Find teams in an organization in Sentry.\n\nUse this tool when you need to:\n- View teams in a Sentry organization\n- Find a team's slug and numeric ID to aid other tool requests\n- Search for specific teams by name or slug\n\nReturns up to 25 results. If you hit this limit, use the query parameter to narrow down results.")
	.usage("--organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--query <query>", "Search query to filter results by name or slug. Use this to narrow down results when there are many items. (default: null; example: null)")
	
	.alias("find_teams")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.query !== undefined) args.query = cmdOpts.query;
			const call = (proxy.findTeams as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.find_teams(organizationSlug: \"value\", regionUrl: \"nul, ...)");

program
	.command("find-projects")
	.summary("find-projects --organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]")
	.description("Find projects in Sentry.\n\nUse this tool when you need to:\n- View projects in a Sentry organization\n- Find a project's slug to aid other tool requests\n- Search for specific projects by name or slug\n\nReturns up to 25 results. If you hit this limit, use the query parameter to narrow down results.")
	.usage("--organization-slug <organization-slug> [--region-url <region-url>] [--query <query>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--query <query>", "Search query to filter results by name or slug. Use this to narrow down results when there are many items. (default: null; example: null)")
	
	.alias("find_projects")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.query !== undefined) args.query = cmdOpts.query;
			const call = (proxy.findProjects as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.find_projects(organizationSlug: \"value\", regionUrl: \", ...)");

program
	.command("find-releases")
	.summary("find-releases --organization-slug <organization-slug> [--region-url <region-url>] [--project-slug <project-slug>] [--query <query>] [--raw <json>]")
	.description("Find releases in Sentry.\n\nUse this tool when you need to:\n- Find recent releases in a Sentry organization\n- Find the most recent version released of a specific project\n- Determine when a release was deployed to an environment\n\n<examples>\n### Find the most recent releases in the 'my-organization' organization\n\n```\nfind_releases(organizationSlug='my-organization')\n```\n\n### Find releases matching '2ce6a27' in the 'my-organization' organization\n\n```\nfind_releases(organizationSlug='my-organization', query='2ce6a27')\n```\n</examples>\n\n<hints>\n- If the user passes a parameter in the form of name/otherName, its likely in the format of <organizationSlug>/<projectSlug>.\n</hints>")
	.usage("--organization-slug <organization-slug> [--region-url <region-url>] [--project-slug <project-slug>] [--query <query>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--project-slug <project-slug>", "The project's slug. This will default to all projects you have access to. It is encouraged to specify this when possible. (default: null; example: null)")
	.option("--query <query>", "Search for versions which contain the provided string. (default: null; example: null)")
	
	.alias("find_releases")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.projectSlug !== undefined) args.projectSlug = cmdOpts.projectSlug;
		if (cmdOpts.query !== undefined) args.query = cmdOpts.query;
			const call = (proxy.findReleases as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.find_releases(organizationSlug: \"value\", regionUrl: \", ...)");

program
	.command("get-issue-details")
	.summary("get-issue-details [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--event-id <event-id>] [--issue-url <issue-url:uri>] [--raw <json>]")
	.description("Get detailed information about a specific Sentry issue by ID.\n\nUSE THIS TOOL WHEN USERS:\n- Provide a specific issue ID (e.g., 'CLOUDFLARE-MCP-41', 'PROJECT-123')\n- Ask to 'explain [ISSUE-ID]', 'tell me about [ISSUE-ID]'\n- Want details/stacktrace/analysis for a known issue\n- Provide a Sentry issue URL\n\nDO NOT USE for:\n- General searching or listing issues (use search_issues)\n- Root cause analysis (use analyze_issue_with_seer)\n\nTRIGGER PATTERNS:\n- 'Explain ISSUE-123' → use get_issue_details\n- 'Tell me about PROJECT-456' → use get_issue_details\n- 'What happened in [issue URL]' → use get_issue_details\n\n<examples>\n### With Sentry URL (recommended - simplest approach)\n```\nget_issue_details(issueUrl='https://sentry.sentry.io/issues/6916805731/?project=4509062593708032&query=is%3Aunresolved')\n```\n\n### With issue ID and organization\n```\nget_issue_details(organizationSlug='my-organization', issueId='CLOUDFLARE-MCP-41')\n```\n\n### With event ID and organization\n```\nget_issue_details(organizationSlug='my-organization', eventId='c49541c747cb4d8aa3efb70ca5aba243')\n```\n</examples>\n\n<hints>\n- **IMPORTANT**: If user provides a Sentry URL, pass the ENTIRE URL to issueUrl parameter unchanged\n- When using issueUrl, all other parameters are automatically extracted - don't provide them separately\n- If using issueId (not URL), then organizationSlug is required\n</hints>")
	.usage("[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--event-id <event-id>] [--issue-url <issue-url:uri>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.option("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--issue-id <issue-id>", "The Issue ID. e.g. `PROJECT-1Z43` (example: example-id)")
	.option("--event-id <event-id>", "The ID of the event. (example: example-id)")
	.option("--issue-url <issue-url:uri>", "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43")
	
	.alias("get_issue_details")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.issueId !== undefined) args.issueId = cmdOpts.issueId;
		if (cmdOpts.eventId !== undefined) args.eventId = cmdOpts.eventId;
		if (cmdOpts.issueUrl !== undefined) args.issueUrl = cmdOpts.issueUrl;
			const call = (proxy.getIssueDetails as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.get_issue_details(regionUrl: \"null\", issueId: \"exampl, ...)");

program
	.command("get-issue-tag-values")
	.summary("get-issue-tag-values [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --tag-key <tag-key> [--raw <json>]")
	.description("Get tag value distribution for a specific Sentry issue.\n\nUse this tool when you need to:\n- Understand how an issue is distributed across different tag values\n- Get aggregate counts of unique tag values (e.g., 'how many unique URLs are affected')\n- Analyze which browsers, environments, or URLs are most impacted by an issue\n- View the tag distributions page data programmatically\n\nCommon tag keys:\n- `url`: Request URLs affected by the issue\n- `browser`: Browser types and versions\n- `browser.name`: Browser names only\n- `os`: Operating systems\n- `environment`: Deployment environments (production, staging, etc.)\n- `release`: Software releases\n- `device`: Device types\n- `user`: Affected users\n\n<examples>\n### Get URL distribution for an issue\n```\nget_issue_tag_values(organizationSlug='my-organization', issueId='PROJECT-123', tagKey='url')\n```\n\n### Get browser distribution using issue URL\n```\nget_issue_tag_values(issueUrl='https://sentry.io/issues/PROJECT-123/', tagKey='browser')\n```\n\n### Get environment distribution\n```\nget_issue_tag_values(organizationSlug='my-organization', issueId='PROJECT-123', tagKey='environment')\n```\n</examples>\n\n<hints>\n- If user provides a Sentry URL, pass the ENTIRE URL to issueUrl parameter unchanged\n- Common tag keys: url, browser, browser.name, os, environment, release, device, user\n- Tag keys are case-sensitive\n</hints>")
	.usage("[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --tag-key <tag-key> [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.option("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--issue-id <issue-id>", "The Issue ID. e.g. `PROJECT-1Z43` (example: example-id)")
	.option("--issue-url <issue-url:uri>", "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43")
	.requiredOption("--tag-key <tag-key>", "The tag key to get values for (e.g., 'url', 'browser', 'environment', 'release').")
	
	.alias("get_issue_tag_values")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.issueId !== undefined) args.issueId = cmdOpts.issueId;
		if (cmdOpts.issueUrl !== undefined) args.issueUrl = cmdOpts.issueUrl;
		if (cmdOpts.tagKey !== undefined) args.tagKey = cmdOpts.tagKey;
			const call = (proxy.getIssueTagValues as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.get_issue_tag_values(regionUrl: \"null\", issueId: \"exa, ...)");

program
	.command("get-trace-details")
	.summary("get-trace-details --organization-slug <organization-slug> [--region-url <region-url>] --trace-id <trace-id> [--raw <json>]")
	.description("Get detailed information about a specific Sentry trace by ID.\n\nUSE THIS TOOL WHEN USERS:\n- Provide a specific trace ID (e.g., 'a4d1aae7216b47ff8117cf4e09ce9d0a')\n- Ask to 'show me trace [TRACE-ID]', 'explain trace [TRACE-ID]'\n- Want high-level overview and link to view trace details in Sentry\n- Need trace statistics and span breakdown\n\nDO NOT USE for:\n- General searching for traces (use search_events with trace queries)\n- Individual span details (this shows trace overview)\n\nTRIGGER PATTERNS:\n- 'Show me trace abc123' → use get_trace_details\n- 'Explain trace a4d1aae7216b47ff8117cf4e09ce9d0a' → use get_trace_details\n- 'What is trace [trace-id]' → use get_trace_details\n\n<examples>\n### Get trace overview\n```\nget_trace_details(organizationSlug='my-organization', traceId='a4d1aae7216b47ff8117cf4e09ce9d0a')\n```\n</examples>\n\n<hints>\n- Trace IDs are 32-character hexadecimal strings\n</hints>")
	.usage("--organization-slug <organization-slug> [--region-url <region-url>] --trace-id <trace-id> [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.requiredOption("--trace-id <trace-id>", "The trace ID. e.g. `a4d1aae7216b47ff8117cf4e09ce9d0a` (example: example-id)")
	
	.alias("get_trace_details")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.traceId !== undefined) args.traceId = cmdOpts.traceId;
			const call = (proxy.getTraceDetails as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.get_trace_details(organizationSlug: \"value\", regionUr, ...)");

program
	.command("get-event-attachment")
	.summary("get-event-attachment --organization-slug <organization-slug> --project-slug <project-slug> --event-id <event-id> [--attachment-id <attachment-id>] [--region-url <region-url>] [--raw <json>]")
	.description("Download attachments from a Sentry event.\n\nUse this tool when you need to:\n- Download files attached to a specific event\n- Access screenshots, log files, or other attachments uploaded with an error report\n- Retrieve attachment metadata and download URLs\n\n<examples>\n### Download a specific attachment by ID\n\n```\nget_event_attachment(organizationSlug='my-organization', projectSlug='my-project', eventId='c49541c747cb4d8aa3efb70ca5aba243', attachmentId='12345')\n```\n\n### List all attachments for an event\n\n```\nget_event_attachment(organizationSlug='my-organization', projectSlug='my-project', eventId='c49541c747cb4d8aa3efb70ca5aba243')\n```\n\n</examples>\n\n<hints>\n- If `attachmentId` is provided, the specific attachment will be downloaded as an embedded resource\n- If `attachmentId` is omitted, all attachments for the event will be listed with download information\n- The `projectSlug` is required to identify which project the event belongs to\n</hints>")
	.usage("--organization-slug <organization-slug> --project-slug <project-slug> --event-id <event-id> [--attachment-id <attachment-id>] [--region-url <region-url>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.requiredOption("--project-slug <project-slug>", "The project's slug. You can find a list of existing projects in an organization using the `find_projects()` tool.")
	.requiredOption("--event-id <event-id>", "The ID of the event. (example: example-id)")
	.option("--attachment-id <attachment-id>", "The ID of the attachment to download. (default: null; example: null)")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	
	.alias("get_event_attachment")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.projectSlug !== undefined) args.projectSlug = cmdOpts.projectSlug;
		if (cmdOpts.eventId !== undefined) args.eventId = cmdOpts.eventId;
		if (cmdOpts.attachmentId !== undefined) args.attachmentId = cmdOpts.attachmentId;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
			const call = (proxy.getEventAttachment as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.get_event_attachment(organizationSlug: \"value\", proje, ...)");

program
	.command("update-issue")
	.summary("update-issue [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--status <status:resolved|resolvedInNextRelease|unresolved|ignored>] [--raw <json>]")
	.description("Update an issue's status or assignment in Sentry. This allows you to resolve, ignore, or reassign issues.\n\nUse this tool when you need to:\n- Resolve an issue that has been fixed\n- Assign an issue to a team member or team for investigation\n- Mark an issue as ignored to reduce noise\n- Reopen a resolved issue by setting status to 'unresolved'\n\n<examples>\n### Resolve an issue\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', status='resolved')\n```\n\n### Assign an issue to a user (use whoami to get your user ID)\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', assignedTo='user:123456')\n```\n\n### Assign an issue to a team (by ID or slug)\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', assignedTo='team:789')\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', assignedTo='team:my-team-slug')\n```\n\n### Mark an issue as ignored\n\n```\nupdate_issue(organizationSlug='my-organization', issueId='PROJECT-123', status='ignored')\n```\n\n</examples>\n\n<hints>\n- If the user provides the `issueUrl`, you can ignore the other required parameters and extract them from the URL.\n- At least one of `status` or `assignedTo` must be provided to update the issue.\n- assignedTo format: Use 'user:ID' for users (e.g., 'user:123456') or 'team:ID_OR_SLUG' for teams (e.g., 'team:789' or 'team:my-team-slug')\n- To find your user ID, first use the whoami tool which returns your numeric user ID\n- Valid status values are: 'resolved', 'resolvedInNextRelease', 'unresolved', 'ignored'.\n</hints>")
	.usage("[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--status <status:resolved|resolvedInNextRelease|unresolved|ignored>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.option("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--issue-id <issue-id>", "The Issue ID. e.g. `PROJECT-1Z43` (example: example-id)")
	.option("--issue-url <issue-url:uri>", "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43")
	.option("--status <status:resolved|resolvedInNextRelease|unresolved|ignored>", "The new status for the issue. Valid values are 'resolved', 'resolvedInNextRelease', 'unresolved', and 'ignored'. (choices: resolved, resolvedInNextRelease, unresolved, ignored; example: resolved)")
	.option("--assigned-to <assigned-to>", "The assignee in format 'user:ID' or 'team:ID_OR_SLUG' where ID is numeric. Example: 'user:123456', 'team:789', or 'team:my-team-slug'. Use the whoami tool to find your user ID.")
	
	.alias("update_issue")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.issueId !== undefined) args.issueId = cmdOpts.issueId;
		if (cmdOpts.issueUrl !== undefined) args.issueUrl = cmdOpts.issueUrl;
		if (cmdOpts.status !== undefined) args.status = cmdOpts.status;
		if (cmdOpts.assignedTo !== undefined) args.assignedTo = cmdOpts.assignedTo;
			const call = (proxy.updateIssue as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.update_issue(regionUrl: \"null\", issueId: \"example-id\", ...)")
	.addHelpText('afterAll', () => '\n' + "// optional (1): assignedTo" + '\n');

program
	.command("search-events")
	.summary("search-events --organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]")
	.description("Search for events AND perform counts/aggregations - the ONLY tool for statistics and counts.\n\nSupports TWO query types:\n1. AGGREGATIONS (counts, sums, averages): 'how many errors', 'count of issues', 'total tokens'\n2. Individual events with timestamps: 'show me error logs from last hour'\n\nUSE THIS FOR ALL COUNTS/STATISTICS:\n- 'how many errors today' → returns count\n- 'count of database failures' → returns count\n- 'total number of issues' → returns count\n- 'average response time' → returns avg()\n- 'sum of tokens used' → returns sum()\n\nALSO USE FOR INDIVIDUAL EVENTS:\n- 'error logs from last hour' → returns event list\n- 'database errors with timestamps' → returns event list\n- 'trace spans for slow API calls' → returns span list\n\nDataset Selection (AI automatically chooses):\n- errors: Exception/crash events\n- logs: Log entries\n- spans: Performance data, AI/LLM calls, token usage\n\nDO NOT USE for grouped issue lists → use search_issues\n\n<examples>\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='how many errors today')\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='count of database failures this week')\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='total tokens used by model')\nsearch_events(organizationSlug='my-org', naturalLanguageQuery='error logs from the last hour')\n</examples>\n\n<hints>\n- If the user passes a parameter in the form of name/otherName, it's likely in the format of <organizationSlug>/<projectSlug>.\n- Parse org/project notation directly without calling find_organizations or find_projects.\n</hints>")
	.usage("--organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.requiredOption("--natural-language-query <natural-language-query>", "Natural language description of what you want to search for")
	.option("--project-slug <project-slug>", "The project's slug. You can find a list of existing projects in an organization using the `find_projects()` tool. (default: null; example: null)")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--limit <limit:number>", "Maximum number of results to return (default: 10; example: 10)", (value) => parseFloat(value))
	.option("--include-explanation <include-explanation:true|false>", "Include explanation of how the query was translated (default: false; example: false)", (value) => value !== 'false')
	
	.alias("search_events")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.naturalLanguageQuery !== undefined) args.naturalLanguageQuery = cmdOpts.naturalLanguageQuery;
		if (cmdOpts.projectSlug !== undefined) args.projectSlug = cmdOpts.projectSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.limit !== undefined) args.limit = cmdOpts.limit;
		if (cmdOpts.includeExplanation !== undefined) args.includeExplanation = cmdOpts.includeExplanation;
			const call = (proxy.searchEvents as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.search_events(organizationSlug: \"value\", naturalLangu, ...)")
	.addHelpText('afterAll', () => '\n' + "// optional (1): includeExplanation" + '\n');

program
	.command("analyze-issue-with-seer")
	.summary("analyze-issue-with-seer [--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--instruction <instruction>] [--raw <json>]")
	.description("Use Seer to analyze production errors and get detailed root cause analysis with specific code fixes.\n\nUse this tool when you need:\n- Detailed AI-powered root cause analysis\n- Specific code fixes and implementation guidance\n- Step-by-step troubleshooting for complex issues\n- Understanding why an error is happening in production\n\nWhat this tool provides:\n- Root cause analysis with code-level explanations\n- Specific file locations and line numbers where errors occur\n- Concrete code fixes you can apply\n- Step-by-step implementation guidance\n\nThis tool automatically:\n1. Checks if analysis already exists (instant results)\n2. Starts new AI analysis if needed (~2-5 minutes)\n3. Returns complete fix recommendations\n\n<examples>\n### User: \"What's causing this error? https://my-org.sentry.io/issues/PROJECT-1Z43\"\n\n```\nanalyze_issue_with_seer(issueUrl='https://my-org.sentry.io/issues/PROJECT-1Z43')\n```\n\n### User: \"Can you help me understand why this is failing in production?\"\n\n```\nanalyze_issue_with_seer(organizationSlug='my-organization', issueId='ERROR-456')\n```\n</examples>\n\n<hints>\n- Use this tool when you need deeper analysis beyond basic issue details\n- If the user provides an issueUrl, extract it and use that parameter alone\n- The analysis includes actual code snippets and fixes, not just error descriptions\n- Results are cached - subsequent calls return instantly\n</hints>")
	.usage("[--organization-slug <organization-slug>] [--region-url <region-url>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] [--instruction <instruction>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.option("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--issue-id <issue-id>", "The Issue ID. e.g. `PROJECT-1Z43` (example: example-id)")
	.option("--issue-url <issue-url:uri>", "The URL of the issue. e.g. https://my-organization.sentry.io/issues/PROJECT-1Z43")
	.option("--instruction <instruction>", "Optional custom instruction for the AI analysis")
	
	.alias("analyze_issue_with_seer")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.issueId !== undefined) args.issueId = cmdOpts.issueId;
		if (cmdOpts.issueUrl !== undefined) args.issueUrl = cmdOpts.issueUrl;
		if (cmdOpts.instruction !== undefined) args.instruction = cmdOpts.instruction;
			const call = (proxy.analyzeIssueWithSeer as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.analyze_issue_with_seer(regionUrl: \"null\", issueId: \", ...)");

program
	.command("search-docs")
	.summary("search-docs --query <query> [--max-results <max-results:number>] [--guide <guide>] [--raw <json>]")
	.description("Search Sentry documentation for SDK setup, instrumentation, and configuration guidance.\n\nUse this tool when you need to:\n- Set up Sentry SDK or framework integrations (Django, Flask, Express, Next.js, etc.)\n- Configure features like performance monitoring, error sampling, or release tracking\n- Implement custom instrumentation (spans, transactions, breadcrumbs)\n- Configure data scrubbing, filtering, or sampling rules\n\nReturns snippets only. Use `get_doc(path='...')` to fetch full documentation content.\n\n<examples>\n```\nsearch_docs(query='Django setup configuration SENTRY_DSN', guide='python/django')\nsearch_docs(query='source maps webpack upload', guide='javascript/nextjs')\n```\n</examples>\n\n<hints>\n- Use guide parameter to filter to specific technologies (e.g., 'javascript/nextjs')\n- Include specific feature names like 'beforeSend', 'tracesSampleRate', 'SENTRY_DSN'\n</hints>")
	.usage("--query <query> [--max-results <max-results:number>] [--guide <guide>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--query <query>", "The search query in natural language. Be specific about what you're looking for.")
	.option("--max-results <max-results:number>", "Maximum number of results to return (1-10) (default: 3; example: 3)", (value) => parseFloat(value))
	.option("--guide <guide>", "Optional guide filter to limit search results to specific documentation sections. Use either a platform (e.g., 'javascript', 'python') or platform/guide combination (e.g., 'javascript/nextjs', 'python/django'). (default: null; example: null)")
	
	.alias("search_docs")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.query !== undefined) args.query = cmdOpts.query;
		if (cmdOpts.maxResults !== undefined) args.maxResults = cmdOpts.maxResults;
		if (cmdOpts.guide !== undefined) args.guide = cmdOpts.guide;
			const call = (proxy.searchDocs as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.search_docs(query: \"value\", maxResults: 3, guide: \"null\")");

program
	.command("get-doc")
	.summary("get-doc --path <path> [--raw <json>]")
	.description("Fetch the full markdown content of a Sentry documentation page.\n\nUse this tool when you need to:\n- Read the complete documentation for a specific topic\n- Get detailed implementation examples or code snippets\n- Access the full context of a documentation page\n- Extract specific sections from documentation\n\n<examples>\n### Get the Next.js integration guide\n\n```\nget_doc(path='/platforms/javascript/guides/nextjs.md')\n```\n</examples>\n\n<hints>\n- Use the path from search_docs results for accurate fetching\n- Paths should end with .md extension\n</hints>")
	.usage("--path <path> [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--path <path>", "The documentation path (e.g., '/platforms/javascript/guides/nextjs.md'). Get this from search_docs results. (example: /path/to/file.md)")
	
	.alias("get_doc")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.path !== undefined) args.path = cmdOpts.path;
			const call = (proxy.getDoc as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.get_doc(path: \"/path/to/file.md\")");

program
	.command("search-issues")
	.summary("search-issues --organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug-or-id <project-slug-or-id>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]")
	.description("Search for grouped issues/problems in Sentry - returns a LIST of issues, NOT counts or aggregations.\n\nUses AI to translate natural language queries into Sentry issue search syntax.\nReturns grouped issues with metadata like title, status, and user count.\n\nUSE THIS TOOL WHEN USERS WANT:\n- A LIST of issues: 'show me issues', 'what problems do we have'\n- Filtered issue lists: 'unresolved issues', 'critical bugs'\n- Issues by impact: 'errors affecting more than 100 users'\n- Issues by assignment: 'issues assigned to me'\n- User feedback: 'show me user feedback', 'feedback from last week'\n\nDO NOT USE FOR COUNTS/AGGREGATIONS:\n- 'how many errors' → use search_events\n- 'count of issues' → use search_events\n- 'total number of errors today' → use search_events\n- 'sum/average/statistics' → use search_events\n\nALSO DO NOT USE FOR:\n- Individual error events with timestamps → use search_events\n- Details about a specific issue ID → use get_issue_details\n\nREMEMBER: This tool returns a LIST of issues, not counts or statistics!\n\n<examples>\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='critical bugs from last week')\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='unhandled errors affecting 100+ users')\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='issues assigned to me')\nsearch_issues(organizationSlug='my-org', naturalLanguageQuery='user feedback from production')\n</examples>\n\n<hints>\n- If the user passes a parameter in the form of name/otherName, it's likely in the format of <organizationSlug>/<projectSlugOrId>.\n- Parse org/project notation directly without calling find_organizations or find_projects.\n- The projectSlugOrId parameter accepts both project slugs (e.g., 'my-project') and numeric IDs (e.g., '123456').\n</hints>")
	.usage("--organization-slug <organization-slug> --natural-language-query <natural-language-query> [--project-slug-or-id <project-slug-or-id>] [--region-url <region-url>] [--limit <limit:number>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.requiredOption("--organization-slug <organization-slug>", "The organization's slug. You can find a existing list of organizations you have access to using the `find_organizations()` tool.")
	.requiredOption("--natural-language-query <natural-language-query>", "Natural language description of issues to search for")
	.option("--project-slug-or-id <project-slug-or-id>", "The project's slug or numeric ID (optional) (default: null; example: null)")
	.option("--region-url <region-url>", "The region URL for the organization you're querying, if known. For Sentry's Cloud Service (sentry.io), this is typically the region-specific URL like 'https://us.sentry.io'. For self-hosted Sentry installations, this parameter is usually not needed and should be omitted. You can find the correct regionUrl from the organization details using the `find_organizations()` tool. (default: null; example: null)")
	.option("--limit <limit:number>", "Maximum number of issues to return (default: 10; example: 10)", (value) => parseFloat(value))
	.option("--include-explanation <include-explanation:true|false>", "Include explanation of how the query was translated (default: false; example: false)", (value) => value !== 'false')
	
	.alias("search_issues")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.naturalLanguageQuery !== undefined) args.naturalLanguageQuery = cmdOpts.naturalLanguageQuery;
		if (cmdOpts.projectSlugOrId !== undefined) args.projectSlugOrId = cmdOpts.projectSlugOrId;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.limit !== undefined) args.limit = cmdOpts.limit;
		if (cmdOpts.includeExplanation !== undefined) args.includeExplanation = cmdOpts.includeExplanation;
			const call = (proxy.searchIssues as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.search_issues(organizationSlug: \"value\", naturalLangu, ...)")
	.addHelpText('afterAll', () => '\n' + "// optional (1): includeExplanation" + '\n');

program
	.command("search-issue-events")
	.summary("search-issue-events [--organization-slug <organization-slug>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--raw <json>]")
	.description("Search and filter events within a specific issue using natural language queries.\n\nUse this to filter events by time, environment, release, user, trace ID, or other tags. The tool automatically constrains results to the specified issue.\n\nFor cross-issue searches use search_issues, for single event details use get_issue_details.\n\n<examples>\nsearch_issue_events(issueId='MCP-41', organizationSlug='my-org', naturalLanguageQuery='from last hour')\nsearch_issue_events(issueUrl='https://sentry.io/.../issues/123/', naturalLanguageQuery='production with release v1.0')\n</examples>")
	.usage("[--organization-slug <organization-slug>] [--issue-id <issue-id>] [--issue-url <issue-url:uri>] --natural-language-query <natural-language-query> [--project-slug <project-slug>] [--raw <json>]")
	.option('--raw <json>', 'Provide raw JSON arguments to the tool, bypassing flag parsing.')

	.option("--organization-slug <organization-slug>", "Organization slug. Required when using issueId. Not needed when using issueUrl. (default: null; example: null)")
	.option("--issue-id <issue-id>", "Issue ID (e.g., 'MCP-41', 'PROJECT-123'). Requires organizationSlug. Alternatively, use issueUrl. (example: example-id)")
	.option("--issue-url <issue-url:uri>", "Full Sentry issue URL (e.g., 'https://sentry.io/organizations/my-org/issues/123/'). Includes both organization and issue ID.")
	.requiredOption("--natural-language-query <natural-language-query>", "Natural language description of what events you want to find within this issue. Examples: 'from last hour', 'production with release v1.0', 'affecting user alice@example.com', 'with trace ID abc123'")
	.option("--project-slug <project-slug>", "Project slug for better tag discovery. Optional - helps find project-specific tags. (default: null; example: null)")
	.option("--region-url <region-url>", "Sentry region URL. Optional - defaults to main region. (default: null; example: null)")
	.option("--limit <limit:number>", "Maximum number of events to return (1-100, default: 50) (default: 50; example: 50)", (value) => parseFloat(value))
	.option("--include-explanation <include-explanation:true|false>", "Include explanation of how the natural language query was translated to Sentry syntax (default: false; example: false)", (value) => value !== 'false')
	
	.alias("search_issue_events")	.action(async (cmdOpts) => {
		const globalOptions = program.opts();
		const runtime = await ensureRuntime();
		const serverName = embeddedName;
		const proxy = createServerProxy(runtime, serverName, {
			initialSchemas: embeddedSchemas,
		});
		try {
			const args = cmdOpts.raw ? JSON.parse(cmdOpts.raw) : ({} as Record<string, unknown>);
			if (cmdOpts.organizationSlug !== undefined) args.organizationSlug = cmdOpts.organizationSlug;
		if (cmdOpts.issueId !== undefined) args.issueId = cmdOpts.issueId;
		if (cmdOpts.issueUrl !== undefined) args.issueUrl = cmdOpts.issueUrl;
		if (cmdOpts.naturalLanguageQuery !== undefined) args.naturalLanguageQuery = cmdOpts.naturalLanguageQuery;
		if (cmdOpts.projectSlug !== undefined) args.projectSlug = cmdOpts.projectSlug;
		if (cmdOpts.regionUrl !== undefined) args.regionUrl = cmdOpts.regionUrl;
		if (cmdOpts.limit !== undefined) args.limit = cmdOpts.limit;
		if (cmdOpts.includeExplanation !== undefined) args.includeExplanation = cmdOpts.includeExplanation;
			const call = (proxy.searchIssueEvents as any)(args);
			const result = await invokeWithTimeout(call, globalOptions.timeout || 30000);
			printResult(result, globalOptions.output ?? 'text');
		} finally {
			await runtime.close(serverName).catch(() => {});
		}
	})
	.addHelpText('after', () => '\nExample:\n  ' + "mcporter call sentry.search_issue_events(organizationSlug: \"null\", issueId, ...)")
	.addHelpText('afterAll', () => '\n' + "// optional (3): regionUrl, limit, includeExplanation" + '\n');

program
	.command('__mcporter_inspect', { hidden: true })
	.description('Internal metadata printer for mcporter inspect-cli.')
	.action(() => {
		const payload = buildMetadataPayload();
		console.log(JSON.stringify(payload, null, 2));
	});

configureToolCommandHelps();

const FORCE_COLOR = process.env.FORCE_COLOR?.toLowerCase();
const forceDisableColor = FORCE_COLOR === '0' || FORCE_COLOR === 'false';
const forceEnableColor = FORCE_COLOR === '1' || FORCE_COLOR === 'true' || FORCE_COLOR === '2' || FORCE_COLOR === '3';
const hasNoColor = process.env.NO_COLOR !== undefined;
const stdoutStream = process.stdout as NodeJS.WriteStream | undefined;
const supportsAnsiColor = !hasNoColor && (forceEnableColor || (!forceDisableColor && Boolean(stdoutStream?.isTTY)));

const tint = {
	bold(text: string): string {
		return supportsAnsiColor ? '[1m' + text + '[0m' : text;
	},
	dim(text: string): string {
		return supportsAnsiColor ? '[90m' + text + '[0m' : text;
	},
	extraDim(text: string): string {
		return supportsAnsiColor ? '[38;5;244m' + text + '[0m' : text;
	},
};

function configureGeneratedCommandHelp(command: Command): void {
	command.configureHelp({
		commandUsage(target) {
			const usage = (target.name() + ' ' + target.usage()).trim() || target.name();
			return supportsAnsiColor ? tint.bold(usage) : usage;
		},
		optionTerm(option) {
			const term = option.flags ?? '';
			return supportsAnsiColor ? tint.bold(term) : term;
		},
		optionDescription(option) {
			const description = option.description ?? '';
			return supportsAnsiColor ? tint.extraDim(description) : description;
		},
	});
}

function configureToolCommandHelps(): void {
	program.commands.forEach((cmd) => {
		if (cmd.name() === '__mcporter_inspect') {
			return;
		}
		configureGeneratedCommandHelp(cmd);
	});
}

function renderStandaloneHelp(): string {
	const colorfulTitle = tint.bold(embeddedName) + ' ' + tint.dim('— ' + embeddedDescription);
	const plainTitle = embeddedName + ' — ' + embeddedDescription;
	const title = supportsAnsiColor ? colorfulTitle : plainTitle;
	const lines = [title, '', 'Usage: ' + embeddedName + ' <command> [options]', ''];
	if (generatorTools) {
		lines.push(formatEmbeddedTools());
	}
	lines.push('', formatGlobalFlags(), '', formatQuickStart());
	if (generatorInfo) {
		lines.push('', tint.extraDim(generatorInfo));
	}
	return lines.join('\n');
}

program.helpInformation = () => renderStandaloneHelp();

function formatEmbeddedTools(): string {
	const header = supportsAnsiColor ? tint.bold('Embedded tools') : 'Embedded tools';
	if (!generatorTools.length) {
		return header;
	}
	const lines = [header];
	generatorTools.forEach((entry) => {
		const renderedDesc = entry.description
			? supportsAnsiColor
				? tint.extraDim(entry.description)
				: entry.description
			: undefined;
		const base = renderedDesc ? entry.name + ' - ' + renderedDesc : entry.name;
		lines.push('  ' + base);
		if (entry.flags) {
			const renderedFlags = supportsAnsiColor ? tint.extraDim(entry.flags) : entry.flags;
			lines.push('    ' + renderedFlags);
		}
		lines.push('');
	});
	if (lines[lines.length - 1] === '') {
		lines.pop();
	}
	return lines.join('\n');
}

function formatGlobalFlags(): string {
	const header = supportsAnsiColor ? tint.bold('Global flags') : 'Global flags';
	const entries = [
		['-t, --timeout <ms>', 'Call timeout in milliseconds'],
		['-o, --output <format>', 'text | markdown | json | raw (default text)'],
	];
	const formatted = entries.map(([flag, summary]) => '  ' + flag.padEnd(28) + summary);
	return [header, ...formatted].join('\n');
}

function formatQuickStart(): string {
  const header = supportsAnsiColor ? tint.bold('Quick start') : 'Quick start';
  const examples = quickStartExamples();
  if (!examples.length) {
    return header;
  }
  const formatted = examples.map(([cmd, note]) => '  ' + cmd + '\n    ' + tint.dim('# ' + note));
  return [header, ...formatted].join('\n');
}

function quickStartExamples(): Array<[string, string]> {
  const examples: Array<[string, string]> = [];
  const commandMap = new Map<string, string>();
  program.commands.forEach((cmd) => {
    const name = cmd.name();
    if (name !== '__mcporter_inspect') {
      commandMap.set(name, name);
    }
  });
  const embedded = Array.isArray(generatorTools) ? generatorTools : [];
  for (const entry of embedded.slice(0, 3)) {
    const commandName = commandMap.get(entry.name) ?? entry.name;
    const flags = entry.flags ? ' ' + entry.flags.replace(/<[^>]+>/g, '<value>') : '';
    examples.push([embeddedName + ' ' + commandName + flags, 'invoke ' + commandName]);
  }
  if (!examples.length) {
    examples.push([embeddedName + ' <tool> --key value', 'invoke a tool with flags']);
  }
  return examples;
}

function printResult(result: unknown, format: string) {
	const wrapped = createCallResult(result);
	switch (format) {
		case 'json': {
			const json = wrapped.json();
			if (json) {
				console.log(JSON.stringify(json, null, 2));
				return;
			}
			break;
		}
		case 'markdown': {
			const markdown = wrapped.markdown();
			if (markdown) {
				console.log(markdown);
				return;
			}
			break;
		}
		case 'raw': {
			console.log(JSON.stringify(wrapped.raw, null, 2));
			return;
		}
	}
	const text = wrapped.text();
	if (text) {
		console.log(text);
	} else {
		console.log(JSON.stringify(wrapped.raw, null, 2));
	}
}

function normalizeEmbeddedServer(server: typeof embeddedServer) {
	const base = { ...server } as Record<string, unknown>;
	if ((server.command as any).kind === 'http') {
		const urlRaw = (server.command as any).url;
		const urlValue = typeof urlRaw === 'string' ? urlRaw : String(urlRaw);
		return {
			...base,
			command: {
				...(server.command as Record<string, unknown>),
				url: new URL(urlValue),
			},
		};
	}
	if ((server.command as any).kind === 'stdio') {
		return {
			...base,
			command: {
				...(server.command as Record<string, unknown>),
				args: [ ...((server.command as any).args ?? []) ],
			},
		};
	}
	return base;
}

function determineArtifactKind(): 'template' | 'bundle' | 'binary' {
	const scriptPath = typeof process !== 'undefined' && Array.isArray(process.argv) ? process.argv[1] ?? '' : '';
	if (scriptPath.endsWith('.ts')) {
		return 'template';
	}
	if (scriptPath.endsWith('.js')) {
		return 'bundle';
	}
	return 'binary';
}

function resolveArtifactPath(): string {
	if (typeof process !== 'undefined' && Array.isArray(process.argv) && process.argv.length > 1) {
		const script = process.argv[1];
		if (script) {
			return script;
		}
	}
	return embeddedMetadata.artifact.path;
}

function buildMetadataPayload() {
	const invocation = { ...embeddedMetadata.invocation };
	const path = resolveArtifactPath();
	if (artifactKind === 'template' && path) {
		invocation.outputPath = invocation.outputPath ?? path;
	} else if (artifactKind === 'bundle' && path) {
		invocation.bundle = invocation.bundle ?? path;
	} else if (artifactKind === 'binary' && path) {
		invocation.compile = invocation.compile ?? path;
	}
	return {
		...embeddedMetadata,
		artifact: {
			path,
			kind: artifactKind,
		},
		invocation,
	};
}

async function ensureRuntime(): Promise<Awaited<ReturnType<typeof createRuntime>>> {
	return await createRuntime({
		servers: [normalizeEmbeddedServer(embeddedServer)],
	});
}

async function invokeWithTimeout<T>(call: Promise<T>, timeout: number): Promise<T> {
	if (!Number.isFinite(timeout) || timeout <= 0) {
		return await call;
	}
	let timer: ReturnType<typeof setTimeout> | undefined;
	try {
		return await Promise.race([
			call,
			new Promise<never>((_, reject) => {
				timer = setTimeout(() => {
					reject(new Error('Call timed out after ' + timeout + 'ms.'));
				}, timeout);
			}),
		]);
	} finally {
		if (timer) {
			clearTimeout(timer);
		}
	}
}

async function runCli(): Promise<void> {
	const args = process.argv.slice(2);
	if (args.length === 0) {
		program.outputHelp();
		return;
	}
	await program.parseAsync(process.argv);
}

if (process.env.MCPORTER_DISABLE_AUTORUN !== '1') {
	runCli().catch((error) => {
		const message = error instanceof Error ? error.message : String(error);
		console.error(message);
		process.exit(1);
	});
}
